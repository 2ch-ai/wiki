# Виды апскейлеров

**Апскейлер (upscaler)** - это алгоритм или нейросеть, позволяющая увеличивать исходное изображение.

Апскейлеры являются важным инструментом в экосистеме картинко-генеративных нейросетей в связи с двумя обстоятельствами:  

1. Диффузионные модели не умеют генерировать изображения сразу в высоком разрешении  
2. Диффузионные модели не умеют увеличивать изображения  

Апскейлеры применяются в комбинации и диффузионными моделями для увеличения размера и уровня детализации изображений.  

Наиболее простым из практических случаев применения апскейлера является увеличение изображения при помощи алгоритма Hires. fix, который сводится к следующему:  

1. Генерация изображения низкого разрешения при помощи диффузионной модели  
3. Увеличение изображения апскейлером  
4. Повторный прогон диффузионной моделью для сглаживания и придания деталей  

Апскейлер не знает ничего о вашем промпте и не использует CLIP/UNet. Это независимая система, которая не использует ничего кроме исходного изображения.

## Алгоритмические апскейлеры

| Плюсы                               | Минусы            |
| ----------------------------------- | ----------------- |
| ✅ Быстрая скорость работы           | ❌ Низкое качество |
| ✅ Не требуют дополнительных моделей |                   |

Самый простой и быстрый вариант апскейла.

Хоть итоговый результат такого апскейла не такой впечатляющий, как у нейросетевых апскейлеров, всё же следуют помнить, что апскейл - это лишь промежуточный шаг перед повторной обработкой изображения диффузионной моделью, так что при достаточной силе денойза (denoise strength) вся пикселизация и мыло должны уйти.

### Обычные апскейлеры
Представляют собою различные алгоритмы интерполяции RGB-изображений.

Результат работы будет близок к тому, что вы получите просто увеличивая изображение в Photoshop/Krita/Paint.

#### Nearest
Интерполяция на основе соседних пикселей. Отличается высоким уровнем пикселизации.

#### Lanczos
Интерполяция на основе соседних пикселей и от тех, что чуть дальше. Создаёт плавные переходы.

??? info "Сравнение Nearest и Lanczos"

    | Исходное изображение                     | Nearest                                  | Lanczos                                  |
    | ---------------------------------------- | ---------------------------------------- | ---------------------------------------- |
    | ![](https://files.catbox.moe/znl7m0.png) | ![](https://files.catbox.moe/disi7l.png) | ![](https://files.catbox.moe/a5kn2p.png) |

    ---

    **Nearest**

    ![](https://files.catbox.moe/adozji.png)

    ---

    **Lanczos**

    ![](https://files.catbox.moe/nxbsmr.png)

### Латентные апскейлеры
Аналогично, представляют собою различные алгоритмы интерполяции. В то время как обычные и нейросетевые апскейлеры работают с RGB-изображениями, латентные апскейлеры работают с [латентным пространством](../terms/vae.md), что позволяет использовать апскейлер без дополнительных конвертаций с применением VAE.

Поскольку латентное пространство представляет собой данные иного вида в сравнении с RGB-изображениями, то и набор доступных алгоритмов интерполяции так же отличается.

Как правило, во время работы латентных апскейлеров необходимо выставлять силу денойза (denoise strength) выше обычных алгоритмических или нейросетевых апскейлеров - в противном случае будет бросаться в глаза сильная размытость изображения после апскейла. 

??? info "Размытие при низком денойзе для латентного апскейлера"

    ![](https://files.catbox.moe/tvgm8l.jpg)

## Нейросетевые апскейлеры (GAN/DAT)

| Плюсы              | Минусы                                      |
| ------------------ | ------------------------------------------- |
| ✅ Высокое качество | ❌ Нужно устанавливать дополнительные модели |

GAN/DAT-апскейлеры - это нейросетевые модели, которые обучали увеличивать изображения низкого разрешения. Качество обычно выше, чем у алгоритмических апскейлеров.

Функциональной разницы между GAN и DAT нет - это просто две различные архитектуры нейросетей для решения одной и той же задачи.

Скорость работы зависит от архитектуры и размера модели, которые варьируются от менее чем 1Мб до нескольких сотен мегабайт.

Список наиболее ходовых апскейлеров для аниме можно найти [на отдельной странице вики](./neural-upscalers.md).

Больше апскейлеров можно найти на <https://openmodeldb.info>

