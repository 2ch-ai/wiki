---
title: 2ch /nai/ вики
---

<style>
  h1 {
    display: none;
  }
  .md-content__button {
    display: none;
  }
</style>

<center>
  <img style="pointer-events: none; height: 150px;" src="https://counter.seku.su/cmoe?name=2ch_nai_wiki&theme=gb" />

  <div style="font-size: 22px; font-weight: bold; font-family: monospace;">
    Добро пожаловать на 2ch /nai/ вики!
  </div>
</center>

Здесь ты найдёшь всю необходимую информацию, чтобы начать генерировать аниме-тяночек, используя новейшие разработки в нейросетевых технологиях. Используй навигатор на левой панели, чтобы найти нужную тебе информацию.

~~Данная вики ведётся анонимными специалистами по машинному обучению мирового уровня и активно дополняется.~~

**FAQ**

#### Как генерировать на своём железе? 
Необходимо установить [пользователький интерфейс](./interfaces.md) для работы с нейронками и скачать любую понравившуюся [модель](./models/index.md).  

!!! info "Краткое руководство по вкату (NVidia)"
    1. Скачай [последний релиз интерфейса Forge](https://github.com/lllyasviel/stable-diffusion-webui-forge/releases/tag/latest)
    2. Зарегистрируйся на <https://civitai.com>, после чего скачай любую понравившуюся модель. В качестве рекомендации можешь обратить внимание на одну из следующих моделей:

        - [WAI-NSFW-illustrious-SDXL](https://civitai.com/models/827184/wai-nsfw-illustrious-sdxl) - популярный мёрдж на основе Illustrious-XL. Дает приятный базовый стиль и менее требователен к промпту (текстовому запросу), что делает его хорошим вариантом для тех, кто не хочет заморачиваться с тонкой настройкой.

        - [NoobAI-XL](https://civitai.com/models/833294/noobai-xl-nai-xl) - файнтьюн Illustrious-XL, лучше подходит для сложных стилистических запросов и вариативнее в генерации, но требует больше внимания к промпту.

    3. Зайди в папку Forge и перебрось скачанный файл с моделью в директорию `/models/Stable-diffusion`
    3. Запусти update.bat и дождись завершения операции  
    4. Запусти run.bat и дождись, пока подтянутся все зависимости и откроется веб интерфейс по адресу <http://127.0.0.1:7860>  

    Для начала можешь использовать такие настройки генерации (пример для WAI-NSFW-illustrious-SDXL):

    * **Sampling method**: Euler a
    * **Schedule type**: Automatic
    * **Sampling steps**: 15-30
    * **CFG Scale**: 5-7
    * **Разрешение изображения**: 1024 x 1360 - можешь экспериментировать с соотношением сторон, но не выставляй разрешение сильно выше одного мегапикселя. Для получения более крупных картинок используй техники [апскейла](./upscale.md), такие как Hires. fix

    * Начинай свой **промпт** с перечисления [буру-тегов](./prompts.md#где-брать-теги), описывающих то, что ты хочешь видеть на изображении. В конце промпта добавь теги качества:
    ```
    masterpiece, best quality, amazing quality
    ```

    * **Негативный промпт**:
    ```
    bad quality, worst quality, worst detail, sketch, censor
    ```

    Примеры промтов можно посмотреть на civitai в описании к картинкам.

    Модель знает часть старых персонажей. Если кто-то не получается, то нужно скачать/обучить [LoRA-модель](./lora/index.md) на этого персонажа. Так же существуют множество LoRA-моделей на стили разных художников.

Если предпочитаешь более подробные руководства, то можешь ознакомиться с гайдами в зависимости от твоей видеокарты: [NVidia](https://rentry.co/2ch_nai_guide) или [AMD](./install/amd.md).

---

#### Как генерировать в облаке?

Самый простой способ - это использовать онлайн-сервис [civitai.com](https://civitai.com):

1. Регистрируешься на цивите, используя любую фейковую почту, например <https://10minemail.com>  
1. Открываешь на цивите любую картинку, которая тебе понравилась, [например эту](https://civitai.com/images/6339637)   
2. Жмёшь "Remix"  
3. В поле Prompt меняешь запрос на нужный тебе  
4. Жмёшь "Generate"  

На цивите есть лимиты по числу генераций, но можно создать несколько аккаунтов, чтобы обходить эти ограничения.

Кроме того, можно зарабатывать встроенную валюту несколькими разными способами, например, лайкать свои же картинки на других аккаунтах. Полный список того, за что дают валюту, можно найти на [этой странице](https://civitai.com/user/buzz-dashboard).

На цивите присутствует цензура, блокирующая определённые запросы. Со списом запрещённых слов можешь ознакомиться [здесь](https://github.com/civitai/civitai/blob/main/src/utils/metadata/lists/blocklist.json) и [здесь](https://github.com/civitai/civitai/blob/main/src/utils/metadata/lists/blocklist-nsfw.json).

Список прочих сервисов для генерации в облаке описан в [этой статье](./install/clouds.md).

---

#### Какие системные требования для запуска этих нейронок на своём железе?
В первую очередь, всё зависит от количества видеопамяти (VRAM) на твоей машине. Разные чекпоинты (модели) требуют разное количество видеопамяти.

Таблица актуальна для NVidia:

| Базовая модель      | Минимальный объём VRAM | Рекомендуемый объём VRAM |
| ------------------- | ---------------------- | ------------------------ |
| Stable Diffusion 1  | 4 GB VRAM              | 8 GB VRAM                |
| Stable Diffusion XL | 8 GB VRAM              | 12 GB VRAM               |
| FLUX                | 12 GB VRAM             | 24 GB VRAM               |

Потребуется около 10-20 GB свободного места на жёстком диске, чтобы установить все необходимые для запуска нейронок интерфейсы и библиотеки.

Кроме этого, тебе нужно будет скачать, как минимум, один чекпоинт, который ты будешь запускать:

| Базовая модель      | Требуемый объём на жёстком диске                                              |
| ------------------- | ----------------------------------------------------------------------------- |
| Stable Diffusion 1  | от 2 GB  до 4 GB                                                              |
| Stable Diffusion XL | 6.5 GB                                                                        |
| FLUX                | от 4 GB до 24 GB на основную модель + от 2.5 GB до 19 GB на текстовый энкодер |

Рекомендуется размещать все связанные с нейронками файлы на SSD. Впрочем, это повлияет только на скорость загрузки интерфейсов и моделей - на скорость генерации это не влияет.

---

#### Что насчёт цензуры?
Наиболее популярные локальные модели не имеют какой-либо цензуры. Однако, модель может не знать какие-то концепты/фетиши, что, впрочем, исправляется при помощи такого механизма, как [LoRA](./lora/index.md).

Для NSFW рекомендуется, в первую очередь, обратить внимание на модели [WAI-NSFW-illustrious-SDXL](https://civitai.com/models/827184/wai-nsfw-illustrious-sdxl) и [NoobAI-XL](https://civitai.com/models/833294/noobai-xl-nai-xl). В случае, если доступный тебе объём видеопамяти не позволяет запускать XL-чекпонты, рекомендуется обратить внимание на [EasyFluff + HLL](./models/stable-diffusion-1/#easyfluff--hll). 

В онлайн-сервисах по типу [civitai.com](https://civitai.com) существует цензура, блокирующая определённые запросы. Со списом запрещённых на CivitAI слов можешь ознакомиться [здесь](https://github.com/civitai/civitai/blob/main/src/utils/metadata/lists/blocklist.json) и [здесь](https://github.com/civitai/civitai/blob/main/src/utils/metadata/lists/blocklist-nsfw.json).

---


#### Какой интерфейс выбрать начинающему?  
[Forge](https://github.com/lllyasviel/stable-diffusion-webui-forge) - наиболее передовой из user-friendly интерфейсов в сфере картинко-генераций. Рекомендуется начать с него.

---

#### Где искать модели?  
[civitai.com](https://civitai.com/) - самый крупный ресурс, хранящий модели, лоры и всё прочее. Фактически, это основной поисковик в сфере картинко-генераций. 

---

#### Какую модель выбрать начинающему?  
[WAI-NSFW-illustrious-SDXL](https://civitai.com/models/827184/wai-nsfw-illustrious-sdxl) - популярный мёрдж на основе Illustrious-XL. Дает приятный базовый стиль и менее требователен к промпту (текстовому запросу), что делает его хорошим вариантом для тех, кто не хочет заморачиваться с тонкой настройкой.

[NoobAI-XL](https://civitai.com/models/833294/noobai-xl-nai-xl) - файнтьюн Illustrious-XL, лучше подходит для сложных стилистических запросов и вариативнее в генерации, но требует больше внимания к промпту.

---

#### Нейронки знают персонажа %waifuname%?  
Зависит от того, насколько твоя вайфу популярна - Хатсуне Мику или Аску Лэнгли знает любая уважающая себя аниме модель. Но вон ту няшу из текущего онгоинга, вероятно, ни одна из моделей не знает.

Впрочем, не стоит отчаиваться, ведь существует такой механизм как [LoRA](./lora/index.md), который позволит тебе сгенерировать нужного персонажа, даже если основная модель о нём не знает.

---

#### Что такое **LoRA**?  
Метод дообучения нейросетевых моделей, главной особенностью которого является то, что он не вносит изменения в обучаемую модель. Вместо этого создаётся небольшой файл, содержащий патч с изменениями.

Подробнее смотри в [этой статье](./lora/index.md).

---

#### Что такое **ControlNet**?  
Cпособ управления процессом генерации изображения с помощью дополнительных нейросетей. Ты можешь задавать дополнительные условия, например, контуры, глубину или позу человека, чтобы получить более точный и желаемый результат.

Подробнее смотри в [этой статье](./controlnet/index.md).

---

#### Как активировать тёмный интерфейс?
Добавь `--theme dark` в параметрах запуска батника.

---

#### Как мне поставить генерацию картинок на ночь?

??? note "Правая кнопка мыши на кнопку "Generate" -> "Generate forever"."
    ![](https://files.catbox.moe/uc48c7.webp)

---

#### Как восстановить последние использованные настройки после перезапуска интерфейса?
??? note "Вариант 1: Используй синюю кнопку со стрелкой, которая находится под кнопкой генерации"
    ![](https://files.catbox.moe/7llnrl.webp)

??? note "Вариант 2: Используй плагин stable-diffusion-webui-state"
    Поставь [плагин](https://github.com/ilian6806/stable-diffusion-webui-state), перезапусти автоматик, перейди в Settings -> State и там выбери, какие из настроек ты хочешь сохранять после перезапуска.

    ![](https://files.catbox.moe/pn6iek.webp)

!!! note "Вариант 3: Используй плагин [Config-Presets](https://github.com/Zyin055/Config-Presets)"

---

#### Как мне вынести настройки VAE и Clip-skip в верхнюю часть интерфейса?
Открой "Settings -> User interface" и выстави в поле "Quicksettings list" следующую строку:

```
sd_model_checkpoint,sd_vae,CLIP_stop_at_last_layers
```

??? note "Картинка с инструкцией"
    ![](https://files.catbox.moe/hy25fk.webp)



---

#### Как вы создаёте эти огромные 4k/8k картинки?
При помощи различных техник апскейла, таких как тайловый апскейл с помощью скрипта SD Upscale или плагина [multidiffusion-upscaler-for-automatic1111](https://github.com/pkuliyi2015/multidiffusion-upscaler-for-automatic1111).

Подробнее смотри в [этой статье](./upscale.md).

---

#### Генерируются чёрные квадраты
У тебя проблема с VAE, смотри решение [здесь](./vae.md#перестаём-генерировать-чёрные-квадраты).

---

#### Почему у персонажа неправильное количество пальцев?
Это общая проблема всех диффузионных моделей. Либо используй читы в виде какого-нибудь из тегов рода:

* `arms behind head`
* `arms behind back`
* `arms between legs`
* `arms in pockets`

Либо придётся исправлять кривые пальцы после генерации через Inpaint.

----

#### Почему персонаж генерируется несколько раз на одной картинке?
1. Используй позитивные теги `1girl, solo` и негативные `2girls, multiple characters`
1. Уменьши стартовый размер картинки и увеличивай её при помощи алгоритма Hires. fix
2. Если ты уже используешь Hires. fix, то уменьши denoising strength

---

Ты дочитал FAQ до конца. Молодец!

Если у тебя остались ещё вопросы, спрашивай в [Anime Diffusion](https://2ch.hk/ai/) треде.